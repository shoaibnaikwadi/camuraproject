<!-- templates/shop/product_detail.html -->
{% extends 'base.html' %}
{% block content %}
<div class="container mt-4">
  <div class="card p-4">
    <h3>{{ combo.name }}</h3>
    <p style="white-space:pre-line;">{{ combo.description }}</p>
    <ul>
      <li>Camera: {{ combo.camera_qty }} × {{ combo.camera.get_camera_type_display }} (₹{{ combo.camera.price }} each)</li>
      <li>DVR: {{ combo.dvr.get_resolution_display }} {{ combo.dvr.get_channels_display }} — ₹{{ combo.dvr.price }}</li>
      <li>Cable: {{ combo.cable.get_length_display }} — ₹{{ combo.cable.price }}</li>
      <li>Power: {{ combo.power.get_range_slug_display }} — ₹{{ combo.power.price }}</li>
      <li>BNC: ₹{{ combo.bnc_connector.price }}, DC: ₹{{ combo.dc_connector.price }}</li>
      <li>Installation: ₹{{ combo.installation.price }}</li>
    </ul>
    <h4>Total: ₹{{ combo.total_price }}</h4>

    <form action="{% url 'add_to_cart' combo.id %}" method="post" class="mb-2">
      {% csrf_token %}
      <div class="input-group mb-2" style="max-width:140px;">
        <input type="number" name="qty" value="1" min="1" class="form-control form-control-sm">
        <button class="btn btn-success btn-sm" type="submit">Add to Cart</button>
      </div>
    </form>

    <form action="{% url 'buy_now' combo.id %}" method="post">
      {% csrf_token %}
      <input type="hidden" name="qty" value="1">
      <button class="btn btn-warning">Buy Now</button>
    </form>
  </div>
</div>
{% endblock %}
