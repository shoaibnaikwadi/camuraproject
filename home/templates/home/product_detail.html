{% extends 'base.html' %}
{% block content %}

<div class="container mt-5">

  <div class="row">

    <!-- PRODUCT IMAGE -->
    <div class="col-lg-5 text-center">
      <div class="product-image-box shadow-sm p-3 rounded">
        {% if combo.image %}
        <img src="{{ combo.image.url }}" class="main-product-image" alt="{{ combo.name }}">
        {% else %}
        <img src="/static/img/no-image.png" class="main-product-image" alt="No Image">
        {% endif %}
      </div>
    </div>

    <!-- PRODUCT DETAILS -->
    <div class="col-lg-4 mt-4 mt-lg-0">
      <h3 class="fw-bold">{{ combo.name }}</h3>

      <p class="text-muted" style="white-space:pre-line;">{{ combo.description }}</p>

      <hr>

      <h5 class="fw-bold mb-3">ðŸ“¦ What's Included</h5>
      <ul class="spec-list">
        <li><b>Camera:</b> {{ combo.camera_qty }} Ã— {{ combo.camera.get_camera_type_display }}
          (â‚¹{{ combo.camera.price }} each)</li>

        <li><b>DVR:</b> {{ combo.dvr.get_resolution_display }} {{ combo.dvr.get_channels_display }}
          â€” â‚¹{{ combo.dvr.price }}</li>

        <li><b>Cable:</b> {{ combo.cable.get_length_display }} â€” â‚¹{{ combo.cable.price }}</li>

        <li><b>Power Supply:</b> {{ combo.power.get_range_slug_display }} â€” â‚¹{{ combo.power.price }}</li>

        <li><b>BNC Connector:</b> â‚¹{{ combo.bnc_connector.price }},
          <b>DC Connector:</b> â‚¹{{ combo.dc_connector.price }}
        </li>

        <li><b>Installation Charges:</b> â‚¹{{ combo.installation.price }}</li>
      </ul>

      <hr>

      <h4 class="text-success fw-bold">Total: â‚¹{{ combo.total_price }}</h4>
    </div>

    <!-- BUY BOX -->
    <div class="col-lg-3 mt-4 mt-lg-0">
      <div class="card shadow buy-box p-3">
        <h4 class="text-success fw-bold mb-3">â‚¹{{ combo.total_price }}</h4>

        <form action="{% url 'add_to_cart' combo.id %}" method="post" class="mb-2">
          {% csrf_token %}
          <label class="fw-semibold">Quantity</label>
          <div class="input-group mb-3" style="max-width:140px;">
            <input type="number" name="qty" value="1" min="1" class="form-control form-control-sm">
          </div>
          <button class="btn btn-success w-100 mb-2">Add to Cart</button>
        </form>

        <form action="{% url 'buy_now' combo.id %}" method="post">
          {% csrf_token %}
          <input type="hidden" name="qty" value="1">
          <button class="btn btn-warning w-100">Buy Now</button>
        </form>
      </div>
    </div>

  </div>
</div>


<style>
  .main-product-image {
    width: 100%;
    height: 350px;
    object-fit: contain;
  }

  .product-image-box {
    background: #fff;
    border-radius: 12px;
  }

  .spec-list li {
    margin-bottom: 6px;
    font-size: 15px;
  }

  .buy-box {
    border-radius: 12px;
  }

  .buy-box button {
    border-radius: 20px;
  }
</style>

{% endblock %}